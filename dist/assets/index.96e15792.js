var D=Object.defineProperty,R=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var b=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))V.call(t,r)&&b(e,r,t[r]);if(N)for(var r of N(t))j.call(t,r)&&b(e,r,t[r]);return e},g=(e,t)=>R(e,T(t));import{j as k,r as u,u as A,c as O,R as U,a as L}from"./vendor.6eb98247.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}};W();var P="/assets/icon-reply.b32cf4fa.svg";const s=k.exports.jsx,o=k.exports.jsxs,Y=e=>o("div",{onClick:e.clickHandler,className:"\r flex items-center\r space-x-1.5\r select-none active:opacity-75\r transition-opacity",children:[s("img",{className:"inline-block h-fit",src:P,alt:"reply_icon"}),s("span",{className:"font-bold text-modrateBlue",children:"Reply"})]});var $="/assets/icon-edit.be86deeb.svg";const G=e=>o("div",{onClick:e.clickHandler,className:"\r flex items-center\r space-x-1.5\r select-none active:opacity-75\r transition-opacity",children:[s("img",{className:"inline-block h-fit",src:$,alt:"reply_icon"}),s("span",{className:"font-bold text-modrateBlue",children:"Edit"})]});var J="/assets/icon-delete.a955972c.svg";const q=e=>o("div",{onClick:e.clickHandler,className:"\r flex items-center\r space-x-1.5\r select-none active:opacity-75\r transition-opacity",children:[s("img",{className:"inline-block h-fit",src:J,alt:"reply_icon"}),s("span",{className:"font-bold text-softRed",children:"Delete"})]}),F=e=>s("svg",{className:"cursor-pointer group",width:"11",height:"11",onClick:e.clickHandler,xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M6.33 10.896c.137 0 .255-.05.354-.149.1-.1.149-.217.149-.354V7.004h3.315c.136 0 .254-.05.354-.149.099-.1.148-.217.148-.354V5.272a.483.483 0 0 0-.148-.354.483.483 0 0 0-.354-.149H6.833V1.4a.483.483 0 0 0-.149-.354.483.483 0 0 0-.354-.149H4.915a.483.483 0 0 0-.354.149c-.1.1-.149.217-.149.354v3.37H1.08a.483.483 0 0 0-.354.15c-.1.099-.149.217-.149.353v1.23c0 .136.05.254.149.353.1.1.217.149.354.149h3.333v3.39c0 .136.05.254.15.353.098.1.216.149.353.149H6.33Z",className:`transition-colors group-hover:fill-modrateBlue ${e.checked?"fill-modrateBlue":"fill-lightGrayishBlue"}`})}),Z=e=>s("svg",{className:"cursor-pointer group",width:"11",height:"3",onClick:e.clickHandler,xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M9.256 2.66c.204 0 .38-.056.53-.167.148-.11.222-.243.222-.396V.722c0-.152-.074-.284-.223-.395a.859.859 0 0 0-.53-.167H.76a.859.859 0 0 0-.53.167C.083.437.009.57.009.722v1.375c0 .153.074.285.223.396a.859.859 0 0 0 .53.167h8.495Z",className:`transition-colors group-hover:fill-modrateBlue ${e.checked?"fill-modrateBlue":"fill-lightGrayishBlue"}`})}),z=e=>{var y;const[t,r]=u.exports.useState((y=e.score)!=null?y:0),[a,n]=u.exports.useState(!1),[l,c]=u.exports.useState(!1),p=()=>{r(t-1),n(!1)},m=()=>{r(t+1),c(!1)},f=d=>{r(t+d),n(!0)},x=d=>{r(t-d),c(!0)};return o("div",{className:"\r bg-veryLightGray\r flex items-center justify-center\r gap-4 w-24 h-10\r md:flex-col md:gap-3 md:h-24 md:w-10\r rounded-md select-none\r col-start-1 row-start-3\r md:row-span-3 ",children:[s(F,{checked:a,clickHandler:()=>{if(a){p();return}if(l){m(),f(2);return}f(1)}}),s("span",{className:"text-modrateBlue text-lg font-medium",role:"none",children:t}),s(Z,{checked:l,clickHandler:()=>{if(l){m();return}if(a){p(),x(2);return}x(1)}})]})};class C{constructor(t,r){this.id=A(),this.content=r,this.user=t,this.createdAt="0 second ago",this.replies=[],this.score=0}}class K extends C{constructor(t,r,a){super(t,r);this.replyingTo=a}}function S(e,t){for(let r=0;r<e.length;r++){if(e[r].id===t)return e[r].user.username;if(e[r].replies.length>0)return S(e[r].replies,t)}}const E=(e,t)=>e.filter(r=>r.id===t?!1:("replies"in r&&(r.replies=E(r.replies,t)),!0)),B=(e,t,r)=>e.map(a=>(a.id===t&&(a.content=r),"replies"in a&&(a.replies=B(a.replies,t,r)),a)),H=(e,t,r,a)=>e.map(n=>(n.id===t&&(n.replies=[...n.replies,new K(r,a,S(e,t))]),"replies"in n&&(n.replies=H(n.replies,t,r,a)),n)),Q={image:{png:"./images/avatars/image-juliusomo.png"},username:"juliusomo"},X=[{id:1,content:"Impressive! Though it seems the drag feature could be improved. But overall it looks incredible. You've nailed the design and the responsiveness at various breakpoints works really well.",createdAt:"1 month ago",score:12,user:{image:{png:"./images/avatars/image-amyrobson.png"},username:"amyrobson"},replies:[]},{id:2,content:"Woah, your project looks awesome! How long have you been coding for? I'm still new, but think I want to dive into React as well soon. Perhaps you can give me an insight on where I can learn React? Thanks!",createdAt:"2 weeks ago",score:5,user:{image:{png:"./images/avatars/image-maxblagun.png"},username:"maxblagun"},replies:[{id:3,content:"If you're still new, I'd recommend focusing on the fundamentals of HTML, CSS, and JS before considering React. It's very tempting to jump ahead but lay a solid foundation first.",createdAt:"1 week ago",score:4,replyingTo:"maxblagun",user:{image:{png:"./images/avatars/image-ramsesmiron.png"},username:"ramsesmiron"},replies:[]},{id:4,content:"I couldn't agree more with this. Everything moves so fast and it always seems like everyone knows the newest library/framework. But the fundamentals are what stay constant.",createdAt:"2 days ago",score:2,replyingTo:"ramsesmiron",user:{image:{png:"./images/avatars/image-juliusomo.png"},username:"juliusomo"},replies:[]}]}];var _;const ee={currentUser:Q,comments:(_=JSON.parse(localStorage.getItem("comments")))!=null?_:X},te=(e=ee,t)=>{switch(t.type){case"SEND_COMMENT":return g(h({},e),{comments:[...e.comments,new C(t.user,t.content)]});case"UPDATE_COMMENT":return g(h({},e),{comments:B(e.comments,t.id,t.content)});case"SEND_REPLY":return g(h({},e),{comments:H(e.comments,t.id,t.user,t.content)});case"DELETE_COMMENT":return g(h({},e),{comments:E(e.comments,t.id)});default:return e}},i=O(te),re=e=>{const{currentUser:t}=i.getState(),r=t.username===e.username;return o("div",{className:"\r flex flex-wrap gap-4 items-center\r col-span-2 md:col-start-2 md:row-start-1\r ",role:"status",children:[s("img",{className:"h-8",src:e.avatar,alt:"profile picture"}),o("h1",{className:"text-[1.05rem] text-darkBlue font-semibold\r flex items-center gap-2",children:[e.username,s("span",{style:{display:r?null:"none"},className:"bg-modrateBlue text-white\r text-xs text-center px-2",children:"you"})]}),s("span",{className:"text-grayishBlue font-normal text-base",children:e.createdAt})]})},se=(e,t)=>({type:"SEND_COMMENT",user:e,content:t}),ne=(e,t,r)=>({type:"SEND_REPLY",id:e,user:t,content:r}),ae=(e,t)=>({type:"UPDATE_COMMENT",id:e,content:t}),le=e=>({type:"DELETE_COMMENT",id:e}),oe=({id:e,setShowWriteReply:t})=>{const[r,a]=u.exports.useState(""),{currentUser:n}=i.getState();return o("div",{className:"WriteBox",children:[s("img",{className:"h-10",src:n.image.png,alt:"avator"}),s("textarea",{className:"WriteBox__textarea",placeholder:"Add a comment...",onChange:l=>{a(l.target.value)},value:r}),s("button",{className:"WriteBox__btn",onClick:()=>{!r||(i.dispatch(ne(e,n,r)),t(!1))},children:"REPLY"})]})},ie=({cancelHandler:e,deleteHandler:t})=>s("div",{className:"fixed inset-0 h-full bg-black bg-opacity-10\r grid place-items-center animate-fade-in-up",children:o("div",{className:"bg-white py-6 rounded-lg space-y-4\r w-96 p-6",children:[s("h1",{className:"text-darkBlue text-xl font-medium",children:"Delete Comment"}),s("p",{className:"text-darkBlue",children:"Are you sure you want to delete this comment? This will remove the comment and can't be undone"}),o("div",{className:"flex text-center gap-4",children:[s("button",{className:"\r px-5 py-2 rounded-md active:opacity-80 w-1/2\r uppercase bg-grayishBlue text-white font-medium",onClick:e,children:"no, cancel"}),s("button",{className:"\r px-5 py-2 rounded-md active:opacity-80 w-1/2\r uppercase bg-softRed text-white font-medium",onClick:t,children:"yes, delete"})]})]})}),ce=({user:e})=>s("span",{className:"text-modrateBlue font-semibold",children:`@${e}`}),M=({comment:e,children:t})=>{const[r,a]=u.exports.useState(!1),[n,l]=u.exports.useState(!1),[c,p]=u.exports.useState(!1),[m,f]=u.exports.useState(t),{currentUser:x}=i.getState(),v=x.username===e.user.username;function w(){a(!r)}function y(){p(!c)}return o("div",{children:[n?s(ie,{deleteHandler:()=>{i.dispatch(le(e.id)),l(!1)},cancelHandler:()=>{l(!1)}}):null,o("div",{className:"\r p-4 my-4 bg-white rounded-md shadow-sm\r gap-y-6 grid grid-cols-[auto_auto] \r md:grid-cols-[auto_1fr_auto] md:gap-x-6",children:[s(z,{score:e.score}),s(re,{avatar:e.user.image.png,username:e.user.username,createdAt:e.createdAt}),s("div",{className:"cursor-pointer ml-auto\r col-start-2 row-start-3 self-center\r md:row-start-1",role:"figure",children:v?o("div",{className:"flex gap-5",children:[s(q,{clickHandler:()=>{l(!0)}}),s(G,{clickHandler:y})]}):s(Y,{clickHandler:w})}),s("div",{className:"\r text-grayishBlue text-base font-normal\r col-span-2 md:col-span-2 md:col-start-2\r md:row-span-2",role:"textbox",children:c?o("div",{className:"flex flex-col gap-4",children:[s("textarea",{className:"\r w-full\r rounded px-5 py-2 min-h-[8rem]\r resize-none text-base border-2",value:m,onChange:d=>{f(d.target.value)}}),s("button",{className:"py-2 px-5 bg-modrateBlue\r text-white h-fit max-w-fit rounded \r active:bg-opacity-75 self-end",onClick:()=>{i.dispatch(ae(e.id,m)),p(!1)},children:"UPDATE"})]}):o("p",{children:[e.replyingTo?s(ce,{user:e.replyingTo+" "}):null,m]})})]}),s("div",{children:r?s(oe,{id:e.id,setShowWriteReply:a}):null}),s("div",{className:"border-l-2 pl-5 md:ml-8 md:pl-8",children:(e==null?void 0:e.replies)?e.replies.map(d=>s(M,{comment:d,children:d.content},d.id)):null})]})},de=e=>{const[t,r]=u.exports.useState(""),{currentUser:a}=i.getState();return o("div",{className:"WriteBox",children:[s("img",{className:"h-10",src:a.image.png,alt:"avator"}),s("textarea",{className:"WriteBox__textarea",placeholder:"Add a comment...",value:t,onChange:n=>{r(n.target.value)}}),s("button",{className:"WriteBox__btn",onClick:()=>{!t||(i.dispatch(se(a,t)),r(""))},children:e.btnValue})]})},ue=()=>{const{comments:e}=i.getState();return o("div",{className:"min-h-screen max-w-[44rem] my-10 mx-auto",children:[e.map(t=>s(M,{comment:t,children:t.content},t.id)),s("div",{className:"my-6",children:s(de,{btnValue:"SEND"})})]})},I=()=>U.render(s(L.StrictMode,{children:s(ue,{})}),document.getElementById("root"));i.subscribe(()=>{const{comments:e}=i.getState();localStorage.setItem("comments",JSON.stringify(e)),I()});I();
